<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Chúc mừng ngày 20/11</title>
  </head>
  <body class="not-loaded">
    <div class="night"></div>
    <div class="flowers">
      <div class="flower flower--1">
        <div class="flower__leafs flower__leafs--1">
          <div class="flower__leaf flower__leaf--1"></div>
          <div class="flower__leaf flower__leaf--2"></div>
          <div class="flower__leaf flower__leaf--3"></div>
          <div class="flower__leaf flower__leaf--4"></div>
          <div class="flower__white-circle"></div>

          <div class="flower__light flower__light--1"></div>
          <div class="flower__light flower__light--2"></div>
          <div class="flower__light flower__light--3"></div>
          <div class="flower__light flower__light--4"></div>
          <div class="flower__light flower__light--5"></div>
          <div class="flower__light flower__light--6"></div>
          <div class="flower__light flower__light--7"></div>
          <div class="flower__light flower__light--8"></div>
        </div>
        <div class="flower__line">
          <div class="flower__line__leaf flower__line__leaf--1"></div>
          <div class="flower__line__leaf flower__line__leaf--2"></div>
          <div class="flower__line__leaf flower__line__leaf--3"></div>
          <div class="flower__line__leaf flower__line__leaf--4"></div>
          <div class="flower__line__leaf flower__line__leaf--5"></div>
          <div class="flower__line__leaf flower__line__leaf--6"></div>
        </div>
      </div>

      <div class="flower flower--2">
        <div class="flower__leafs flower__leafs--2">
          <div class="flower__leaf flower__leaf--1"></div>
          <div class="flower__leaf flower__leaf--2"></div>
          <div class="flower__leaf flower__leaf--3"></div>
          <div class="flower__leaf flower__leaf--4"></div>
          <div class="flower__white-circle"></div>

          <div class="flower__light flower__light--1"></div>
          <div class="flower__light flower__light--2"></div>
          <div class="flower__light flower__light--3"></div>
          <div class="flower__light flower__light--4"></div>
          <div class="flower__light flower__light--5"></div>
          <div class="flower__light flower__light--6"></div>
          <div class="flower__light flower__light--7"></div>
          <div class="flower__light flower__light--8"></div>
        </div>
        <div class="flower__line">
          <div class="flower__line__leaf flower__line__leaf--1"></div>
          <div class="flower__line__leaf flower__line__leaf--2"></div>
          <div class="flower__line__leaf flower__line__leaf--3"></div>
          <div class="flower__line__leaf flower__line__leaf--4"></div>
        </div>
      </div>

      <div class="flower flower--3">
        <div class="flower__leafs flower__leafs--3">
          <div class="flower__leaf flower__leaf--1"></div>
          <div class="flower__leaf flower__leaf--2"></div>
          <div class="flower__leaf flower__leaf--3"></div>
          <div class="flower__leaf flower__leaf--4"></div>
          <div class="flower__white-circle"></div>

          <div class="flower__light flower__light--1"></div>
          <div class="flower__light flower__light--2"></div>
          <div class="flower__light flower__light--3"></div>
          <div class="flower__light flower__light--4"></div>
          <div class="flower__light flower__light--5"></div>
          <div class="flower__light flower__light--6"></div>
          <div class="flower__light flower__light--7"></div>
          <div class="flower__light flower__light--8"></div>
        </div>
        <div class="flower__line">
          <div class="flower__line__leaf flower__line__leaf--1"></div>
          <div class="flower__line__leaf flower__line__leaf--2"></div>
          <div class="flower__line__leaf flower__line__leaf--3"></div>
          <div class="flower__line__leaf flower__line__leaf--4"></div>
        </div>
      </div>

      <div class="grow-ans" style="--d: 1.2s">
        <div class="flower__g-long">
          <div class="flower__g-long__top"></div>
          <div class="flower__g-long__bottom"></div>
        </div>
      </div>

      <div class="growing-grass">
        <div class="flower__grass flower__grass--1">
          <div class="flower__grass--top"></div>
          <div class="flower__grass--bottom"></div>
          <div class="flower__grass__leaf flower__grass__leaf--1"></div>
          <div class="flower__grass__leaf flower__grass__leaf--2"></div>
          <div class="flower__grass__leaf flower__grass__leaf--3"></div>
          <div class="flower__grass__leaf flower__grass__leaf--4"></div>
          <div class="flower__grass__leaf flower__grass__leaf--5"></div>
          <div class="flower__grass__leaf flower__grass__leaf--6"></div>
          <div class="flower__grass__leaf flower__grass__leaf--7"></div>
          <div class="flower__grass__leaf flower__grass__leaf--8"></div>
          <div class="flower__grass__overlay"></div>
        </div>
      </div>

      <div class="growing-grass">
        <div class="flower__grass flower__grass--2">
          <div class="flower__grass--top"></div>
          <div class="flower__grass--bottom"></div>
          <div class="flower__grass__leaf flower__grass__leaf--1"></div>
          <div class="flower__grass__leaf flower__grass__leaf--2"></div>
          <div class="flower__grass__leaf flower__grass__leaf--3"></div>
          <div class="flower__grass__leaf flower__grass__leaf--4"></div>
          <div class="flower__grass__leaf flower__grass__leaf--5"></div>
          <div class="flower__grass__leaf flower__grass__leaf--6"></div>
          <div class="flower__grass__leaf flower__grass__leaf--7"></div>
          <div class="flower__grass__leaf flower__grass__leaf--8"></div>
          <div class="flower__grass__overlay"></div>
        </div>
      </div>

      <div class="grow-ans" style="--d: 2.4s">
        <div class="flower__g-right flower__g-right--1">
          <div class="leaf"></div>
        </div>
      </div>

      <div class="grow-ans" style="--d: 2.8s">
        <div class="flower__g-right flower__g-right--2">
          <div class="leaf"></div>
        </div>
      </div>

      <div class="grow-ans" style="--d: 2.8s">
        <div class="flower__g-front">
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--1"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--2"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--3"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--4"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--5"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--6"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--7"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div
            class="flower__g-front__leaf-wrapper flower__g-front__leaf-wrapper--8"
          >
            <div class="flower__g-front__leaf"></div>
          </div>
          <div class="flower__g-front__line"></div>
        </div>
      </div>

      <div class="grow-ans" style="--d: 3.2s">
        <div class="flower__g-fr">
          <div class="leaf"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--1"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--2"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--3"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--4"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--5"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--6"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--7"></div>
          <div class="flower__g-fr__leaf flower__g-fr__leaf--8"></div>
        </div>
      </div>

      <div class="long-g long-g--0">
        <div class="grow-ans" style="--d: 3s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 2.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 3.4s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--1">
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 3.8s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 4s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--2">
        <div class="grow-ans" style="--d: 4s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 4.4s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 4.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--3">
        <div class="grow-ans" style="--d: 4s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 3s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--4">
        <div class="grow-ans" style="--d: 4s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 3s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--5">
        <div class="grow-ans" style="--d: 4s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 3s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--6">
        <div class="grow-ans" style="--d: 4.2s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 4.4s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 4.6s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 4.8s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="long-g long-g--7">
        <div class="grow-ans" style="--d: 3s">
          <div class="leaf leaf--0"></div>
        </div>
        <div class="grow-ans" style="--d: 3.2s">
          <div class="leaf leaf--1"></div>
        </div>
        <div class="grow-ans" style="--d: 3.5s">
          <div class="leaf leaf--2"></div>
        </div>
        <div class="grow-ans" style="--d: 3.6s">
          <div class="leaf leaf--3"></div>
        </div>
      </div>

      <div class="secret-letter" id="secretLetter" aria-label="Lá thư bí mật">
        <div class="secret-letter__wrapper">
          <div class="envelope">
            <div class="heart"></div>
          </div>
        </div>
        <div class="secret-letter__glow"></div>
      </div>
    </div>
    <div class="greeting-text">Chúc mừng ngày Nhà Giáo Việt Nam<br />20-11</div>
    <style>
      .greeting-text {
        position: absolute;
        top: 40px;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        font-weight: 600;
        color: #ff6b9d;
        text-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
        opacity: 0;
        animation: fadeIn 3s ease forwards;
        z-index: 100;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateX(-50%) translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateX(-50%) translateY(0);
        }
      }

      @media (max-width: 768px) {
        .greeting-text {
          font-size: 1.6rem;
          top: 30px;
        }
      }

      @media (max-width: 480px) {
        .greeting-text {
          font-size: 1.3rem;
          top: 25px;
        }
      }

      @media (min-width: 769px) {
        .greeting-text {
          font-size: 2rem;
        }
      }
    </style>
    <audio id="bgMusic2" loop>
      <source src="music/music2.mp3" type="audio/mpeg" />
    </audio>

    <script>
      const bgm = document.getElementById("bgMusic2");
      bgm.volume = 0.35;

      window.addEventListener("load", () => {
        const playPromise = bgm.play();
        if (playPromise !== undefined) {
          playPromise.catch(() => {
            document.addEventListener("click", () => bgm.play(), {
              once: true,
            });
          });
        }
      });
    </script>
    <div class="letters-container"></div>

    <div class="message-popup" id="messagePopup" aria-hidden="true">
      <div class="message-box" role="dialog" aria-modal="true">
        <p class="message-title">Lá thư gửi cô</p>
        <div id="messageText" class="message-text"></div>
        <p class="message-subtitle">Chạm ra ngoài khung để đóng lời chúc.</p>
      </div>
    </div>

    <style>
      .letters-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
        z-index: 10;
      }

      .letter {
        position: absolute;
        top: -80px;
        width: 70px;
        height: 50px;
        background: #fff;
        border: 2px solid #ffb6c1;
        border-radius: 6px;
        box-shadow: 0 3px 8px rgba(255, 182, 193, 0.4);
        pointer-events: auto;
        cursor: pointer;
        animation: fall linear forwards;
      }

      .letter::before {
        content: "";
        position: absolute;
        top: -1px;
        left: 0;
        width: 0;
        height: 0;
        border-left: 35px solid transparent;
        border-right: 35px solid transparent;
        border-top: 20px solid #ffeaf0;
      }

      .letter::after {
        content: "❤";
        position: absolute;
        top: 18px;
        left: 50%;
        transform: translateX(-50%) scale(1);
        color: #ff4d73;
        font-size: 16px;
        text-shadow: 0 0 6px rgba(255, 100, 150, 0.6);
      }
      @keyframes fall {
        0% {
          transform: translateY(-100px) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(110vh) rotate(360deg);
          opacity: 0;
        }
      }

      .message-popup {
        position: fixed;
        inset: 0;
        display: none;
        justify-content: center;
        align-items: center;
        padding: 20px;
        background: rgba(255, 240, 245, 0.8);
        backdrop-filter: blur(4px);
        z-index: 999;
        transition: opacity 0.25s ease;
      }

      .message-box {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), #ffeef5);
        border: 3px solid #ffb6c1;
        border-radius: 24px;
        padding: 32px 40px 28px;
        width: min(720px, 92vw);
        text-align: left;
        box-shadow: 0 20px 45px rgba(255, 182, 193, 0.4);
        animation: popUp 0.4s ease;
      }

      .message-title {
        margin: 0 0 8px;
        font-size: 1.6rem;
        font-weight: 800;
        color: #ff3f9c;
        text-align: center;
        letter-spacing: 0.06em;
      }

      .message-subtitle {
        margin: 22px 0 0;
        font-size: 0.95rem;
        text-align: center;
        color: #c66c91;
        font-style: italic;
        letter-spacing: 0.04em;
      }

      .message-text {
        font-size: 1.05rem;
        line-height: 1.8;
        color: #ff2f8d;
        white-space: pre-line;
        letter-spacing: 0.01em;
        position: relative;
        min-height: 200px;
      }

      .message-text::after {
        content: "";
        display: inline-block;
        width: 2px;
        height: 1.2em;
        margin-left: 4px;
        background: #ff5d9c;
        opacity: 0;
        vertical-align: bottom;
      }

      .message-text.is-typing::after {
        animation: blinkCursor 1s steps(1) infinite;
        opacity: 1;
      }

      @keyframes popUp {
        from {
          transform: scale(0.7);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes blinkCursor {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0;
        }
      }

      .secret-letter {
        position: absolute;
        left: 50%;
        bottom: 21vmin;
        transform: translate(-50%, 0) scale(1);
        transform-origin: center bottom;
        opacity: 0;
        z-index: 140;
        cursor: pointer;
        pointer-events: auto;
        animation: emergeLetter 3.2s ease-out forwards 2.4s;
      }

      .secret-letter__wrapper {
        display: inline-block;
        transform-origin: center;
        animation: sway 6s ease-in-out infinite 6s;
      }

      .secret-letter__glow {
        position: absolute;
        inset: -35px;
        border-radius: 999px;
        background: radial-gradient(
          circle,
          rgba(255, 182, 193, 0.7) 0%,
          rgba(255, 182, 193, 0.05) 70%
        );
        opacity: 0;
        filter: blur(6px);
        animation: glow 3s ease-in-out infinite 6s;
        pointer-events: none;
      }

      .envelope {
        width: 90px;
        height: 60px;
        background: #ffe6ee;
        border: 2px solid #ffb6c1;
        border-radius: 8px;
        position: relative;
        box-shadow: 0 6px 18px rgba(255, 182, 193, 0.55);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .envelope::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 0;
        border-left: 45px solid transparent;
        border-right: 45px solid transparent;
        border-bottom: 32px solid #ffc8d8;
      }

      .heart {
        position: absolute;
        top: 52%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-45deg);
        width: 16px;
        height: 16px;
        background-color: #ff5b8f;
      }

      .heart::before,
      .heart::after {
        content: "";
        position: absolute;
        width: 16px;
        height: 16px;
        background-color: #ff5b8f;
        border-radius: 50%;
      }

      .heart::before {
        top: -8px;
        left: 0;
      }

      .heart::after {
        top: 0;
        left: 8px;
      }

      .secret-letter:hover .envelope {
        transform: scale(1.08);
        box-shadow: 0 0 28px rgba(255, 182, 193, 0.85);
      }

      @keyframes emergeLetter {
        0% {
          opacity: 0;
          transform: translate(-50%, 30vmin) scale(0.3);
        }
        60% {
          opacity: 1;
          transform: translate(-50%, 3vmin) scale(0.95);
        }
        100% {
          opacity: 1;
          transform: translate(-50%, 0) scale(1);
        }
      }

      @keyframes sway {
        0% {
          transform: rotate(0deg);
        }
        25% {
          transform: rotate(2deg);
        }
        50% {
          transform: rotate(0deg);
        }
        75% {
          transform: rotate(-2deg);
        }
        100% {
          transform: rotate(0deg);
        }
      }

      @keyframes glow {
        0%,
        100% {
          opacity: 0.2;
          transform: scale(0.9);
        }
        50% {
          opacity: 0.7;
          transform: scale(1);
        }
      }
    </style>

    <script>
      const messages = [
        `Nhân ngày 20/11, tụi em chúc cô thật nhiều sức khỏe, luôn xinh đẹp và giữ nụ cười rạng rỡ trên môi. Cảm ơn cô đã luôn kiên nhẫn, chịu đựng và dạy dỗ cái lớp nhất quỷ nhì ma này. Tụi em biết nhiều lúc lớp ham chơi, nghịch ngợm làm cô đau đầu, nhưng cô vẫn luôn bao dung và quan tâm tụi em hết mực. Đặc biệt, lớp chúc cô sự nghiệp giáo dục thì thăng hoa, còn sự nghiệp buôn đất thì bùng nổ. Chúc cô siêu mát tay, cứ ra lô nào là khách tranh nhau chốt đơn lô đó, tiền vô như nước. Mong cô sớm thành đại gia bất động sản xịn nhất trường mình ạ❤❤❤`,
      ];

      const container = document.querySelector(".letters-container");
      const popup = document.getElementById("messagePopup");
      const messageText = document.getElementById("messageText");
      const TYPEWRITER_DELAY = 50;
      let typingTimeout;

      function createLetter() {
        const letter = document.createElement("div");
        letter.classList.add("letter");
        letter.style.left = Math.random() * 100 + "vw";

        const duration = Math.random() * 3 + 6;
        letter.style.animationDuration = duration + "s";

        container.appendChild(letter);
        letter.addEventListener("click", () => openLetter());

        setTimeout(() => letter.remove(), duration * 1000);
      }

      function openLetter() {
        const randomMessage =
          messages[Math.floor(Math.random() * messages.length)];
        showMessage(randomMessage);
      }

      function showMessage(text) {
        clearTimeout(typingTimeout);
        popup.style.display = "flex";
        popup.setAttribute("aria-hidden", "false");
        messageText.textContent = "";
        messageText.classList.add("is-typing");
        typeCharacter(text, 1);
      }

      function typeCharacter(text, index) {
        if (index > text.length) {
          messageText.textContent = text;
          messageText.classList.remove("is-typing");
          return;
        }

        messageText.textContent = text.slice(0, index);
        typingTimeout = setTimeout(
          () => typeCharacter(text, index + 1),
          TYPEWRITER_DELAY
        );
      }

      function hidePopup() {
        popup.style.display = "none";
        popup.setAttribute("aria-hidden", "true");
        messageText.classList.remove("is-typing");
        clearTimeout(typingTimeout);
      }

      popup.addEventListener("click", (event) => {
        if (event.target === popup) {
          hidePopup();
        }
      });

      setInterval(createLetter, 1800);

      const secretLetter = document.getElementById("secretLetter");
      const SECRET_LINK = "https://nmt-2k10.github.io/3D_book/";

      if (secretLetter) {
        secretLetter.addEventListener("click", () => {
          window.location.href = SECRET_LINK;
        });
      }
    </script>
  </body>
</html>
<script src="main.js"></script>
